<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Preload critical CSS to prevent FOUC -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="stylesheet" href="styles.css">
    <title>Jumpseat Fox</title>
    <meta name="description" content="Professional tools for flight attendants and aviation professionals by Jumpseat Fox. Works on desktop & mobile.">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kimbofox.github.io/flight-attendant-pay-calculator/">
    <meta property="og:title" content="Jumpseat Fox">
    <meta property="og:description" content="Professional tools for flight attendants and aviation professionals by Jumpseat Fox. Works on desktop & mobile.">
    <meta property="og:image" content="https://kimbofox.github.io/flight-attendant-pay-calculator/images/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://kimbofox.github.io/flight-attendant-pay-calculator/">
    <meta property="twitter:title" content="Jumpseat Fox">
    <meta property="twitter:description" content="Professional tools for flight attendants and aviation professionals by Jumpseat Fox. Works on desktop & mobile.">
    <meta property="twitter:image" content="https://kimbofox.github.io/flight-attendant-pay-calculator/images/og-image.jpg">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="script.js"></script>
</head>
<body>
    <div class="skip-nav-container">
        <a href="#trip-comparison" class="skip-link">Skip to main content</a>
        <a href="#add-trip-btn" class="skip-link">Skip to add trip</a>
        <a href="#side-panel" class="skip-link">Skip to form panel</a>
    </div>
    <div class="app-container">
        <header class="header" id="header">
            <div class="header-logo">
                <img src="AFT Logo.svg" alt="Jumpseat Fox Logo" class="header-logo-image">
                <h1 class="header-logo-title">Jumpseat Fox</h1>
            </div>

            <div class="header-actions">
                <button id="clear-all-btn" class="btn btn-outline btn-emoji" aria-label="Clear all trips" title="Clear All">🧹</button>
                <button id="feedback-btn" class="btn btn-outline btn-emoji" aria-label="Provide feedback" title="Feedback" onclick="window.open('https://docs.google.com/forms/d/e/1FAIpQLSc8ATwj4UAgkAzudfzTqZFK3Bc2fe-6bJb31ojZ1Ml8okeraA/viewform?usp=header', '_blank')">💬</button>
                <button id="export-btn" class="btn btn-outline btn-emoji" aria-label="Export trips" title="Export">📤</button>
            </div>
        </header>

        <div class="main-content">
            <div class="trip-comparison" id="trip-comparison" tabindex="-1">
                <div class="no-trips-message" id="no-trips-message">
                    <h2>No trips to compare yet</h2>
                    <p>Click the "+" button to add your first trip. You can add multiple trips to compare their value and find the best option.</p>
                    <button class="btn btn-primary" id="first-trip-btn" aria-label="Add your first trip">Add Your First Trip</button>
                </div>
            </div>

            <div class="side-panel collapsed" id="side-panel">
                <h2>
                    <span id="panel-title">Add New Trip</span>
                    <button class="panel-close" id="panel-close" aria-label="Close panel" type="button">✕</button>
                </h2>

                <form id="trip-form">
                    <input type="hidden" id="trip-id" value="">

                    <div class="form-group">
                        <label for="trip-name">Trip Name</label>
                        <input type="text" id="trip-name" class="form-control" placeholder="e.g., NYC 3-day" required aria-required="true">
                    </div>

                    <div class="form-group">
                        <label for="pay-year">Pay Year</label>
                        <select id="pay-year" class="form-control" required aria-required="true">
                            <option value="Year 1">Year 1</option>
                            <option value="Year 2">Year 2</option>
                            <option value="Year 3">Year 3</option>
                            <option value="Year 4">Year 4</option>
                            <option value="Year 5">Year 5</option>
                            <option value="Year 6">Year 6</option>
                            <option value="Year 7">Year 7</option>
                            <option value="Year 8">Year 8</option>
                            <option value="Year 9">Year 9</option>
                            <option value="Year 10">Year 10</option>
                            <option value="Year 11">Year 11</option>
                            <option value="Year 12">Year 12</option>
                            <option value="Year 13+">Year 13+</option>
                        </select>
                    </div>

                    <div class="form-group">
                      <label id="white-flag-label-text">White Flag</label>
                      <div class="toggle-container">
                        <label class="toggle-switch">
                          <input type="checkbox" id="white-flag">
                          <span class="toggle-slider" tabindex="0" role="switch" aria-checked="false" aria-labelledby="white-flag-label-text"></span>
                        </label>
                        <span class="toggle-label" id="white-flag-label">No</span>
                      </div>
                    </div>

                    <div class="form-group">
                      <label id="purple-flag-label-text">Purple Flag</label>
                      <div class="toggle-container">
                        <label class="toggle-switch">
                          <input type="checkbox" id="purple-flag">
                          <span class="toggle-slider" tabindex="0" role="switch" aria-checked="false" aria-labelledby="purple-flag-label-text"></span>
                        </label>
                        <span class="toggle-label" id="purple-flag-label">No</span>
                      </div>
                    </div>

                    <div class="conditional-form-group" id="purple-flag-dropdown-group" style="display:none;">
                      <div class="form-group">
                        <label for="purple-flag-premium">Purple Flag Premium</label>
                        <select id="purple-flag-premium" class="form-control">
                          <option value="1.5">150%</option>
                          <option value="2">200%</option>
                          <option value="2.5">250%</option>
                          <option value="3">300%</option>
                        </select>
                      </div>
                    </div>



                    <div class="form-group">
                        <label for="trip-length">Trip Length (Days)</label>
                        <select id="trip-length" class="form-control" required aria-required="true">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Credited Hours</label>
                        <div style="display:flex; gap:8px;">
                            <input
                            type="number"
                            id="credited-hours-hours"
                            class="form-control"
                            min="0"
                            placeholder="Hrs"
                            required
                            aria-required="true"
                        >
                        <input
                            type="number"
                            id="credited-hours-minutes"
                            class="form-control"
                            min="0" max="59" step="1"
                            placeholder="Min"
                            required
                            aria-required="true"
                        >
                    </div>
                    </div>

                    <div class="form-group">
                        <label>Purser Pay</label>
                        <div class="toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="purser-pay">
                                <span class="toggle-slider" tabindex="0" role="switch" aria-checked="false" aria-labelledby="purser-pay-label-text"></span>
                            </label>
                            <span class="toggle-label" id="purser-pay-label">No</span>
                        </div>
                    </div>

                    <div class="conditional-form-group" id="purser-fields-group">
                        <div class="form-group">
                            <label for="aircraft-type">Aircraft Type</label>
                            <select id="aircraft-type" class="form-control">
                                <option value="Narrow1">A319 / A320 / B37‑700</option>
                                <option value="Narrow2">B37‑800‑900‑Max / B57 / A321</option>
                                <option value="Wide">Widebody</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="purser-us-hours">Purser US Hours</label>
                            <input type="number" id="purser-us-hours" class="form-control" min="0" step="0.01" value="0" aria-describedby="purser-us-hours-validation">
                            <div class="validation-message" id="purser-us-hours-validation" role="alert" aria-live="assertive">Galley + Purser hours cannot exceed Credited Hours</div>
                        </div>

                        <div class="form-group">
                            <label for="purser-non-us-hours">Purser Non-US Hours</label>
                            <input type="number" id="purser-non-us-hours" class="form-control" min="0" step="0.01" value="0" aria-describedby="purser-non-us-hours-validation">
                            <div class="validation-message" id="purser-non-us-hours-validation" role="alert" aria-live="assertive">Galley + Purser hours cannot exceed Credited Hours</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Galley Pay</label>
                        <div class="toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="galley-pay">
                                <span class="toggle-slider" tabindex="0" role="switch" aria-checked="false" aria-labelledby="galley-pay-label-text"></span>
                            </label>
                            <span class="toggle-label" id="galley-pay-label">No</span>
                        </div>
                    </div>

                    <div class="conditional-form-group" id="galley-hours-group">
                        <div class="form-group">
                            <label for="galley-hours">Galley Hours</label>
                            <div style="display:flex; gap:8px;">
                                <input
                                    type="number"
                                    id="galley-hours-hours"
                                    class="form-control"
                                    min="0"
                                    placeholder="Hrs"
                                    value="0"
                                    aria-describedby="galley-hours-validation"
                                >
                                <input
                                    type="number"
                                    id="galley-hours-minutes"
                                    class="form-control"
                                    min="0" max="59" step="1"
                                    placeholder="Min"
                                    value="0"
                                    aria-describedby="galley-hours-validation"
                                >
                            </div>
                            <div class="validation-message" id="galley-hours-validation" role="alert" aria-live="assertive">Galley + Purser hours cannot exceed Credited Hours</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label id="intl-pay-override-label-text">International Override
                          <span class="tooltip-icon" tabindex="0">?
                            <span class="tooltip-text">Outside the continental U.S. and Canada</span>
                          </span>
                        </label>
                        <div class="toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="intl-pay-override">
                                <span class="toggle-slider" tabindex="0" role="switch" aria-checked="false" aria-labelledby="intl-pay-override-label-text"></span>
                            </label>
                            <span class="toggle-label" id="intl-pay-override-label">No</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label id="language-pay-label-text">Language Pay</label>
                        <div class="toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="language-pay">
                                <span class="toggle-slider" tabindex="0" role="switch" aria-checked="false" aria-labelledby="language-pay-label-text"></span>
                            </label>
                            <span class="toggle-label" id="language-pay-label">No</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label id="holiday-pay-label-text">Holiday Pay</label>
                        <div class="toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="holiday-pay">
                                <span class="toggle-slider" tabindex="0" role="switch" aria-checked="false" aria-labelledby="holiday-pay-label-text"></span>
                            </label>
                            <span class="toggle-label" id="holiday-pay-label">No</span>
                        </div>
                    </div>

                    <div class="conditional-form-group" id="holiday-hours-group">
                      <div class="form-group">
                        <label for="holiday-hours">
                          Hours on Holiday
                          <span class="tooltip-icon" tabindex="0">?
                            <span class="tooltip-text">
                              Holiday hours = TAFB hours overlapping the holiday.
                            </span>
                          </span>
                        </label>
                        <input type="number" id="holiday-hours" name="holiday-hours" class="form-control" min="0" max="24" value="0" />
                        <div class="validation-message" id="holiday-hours-validation" role="alert" aria-live="assertive" style="display:none;">Maximum is 24 hours</div>
                        <div class="form-help-text" id="holiday-hours-example" style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 4px; line-height: 1.4;">
                          E.g., Trip: Dec 24 @ 22:00 → Dec 26 @ 14:00. Holiday (Dec 25): 24 hours.
                        </div>
                      </div>
                    </div>

                    <div class="form-group">
                        <label>TAFB Time</label>
                        <div style="display:flex; gap:8px;">
                            <input
                            type="number"
                            id="tafb-hours"
                            class="form-control"
                            min="0"
                            placeholder="Hrs"
                            required
                            aria-required="true"
                            >
                            <input
                            type="number"
                            id="tafb-minutes"
                            class="form-control"
                            min="0" max="59" step="1"
                            placeholder="Min"
                            required
                            aria-required="true"
                            >
                        </div>
                    </div>

                    <div class="form-group">
                        <label id="intl-override-label-text">International Per Diem
                          <span class="tooltip-icon" tabindex="0">?
                            <span class="tooltip-text">Destinations outside of U.S., Canada, Mexico, Central America, Caribbean</span>
                          </span>
                        </label>
                        <div class="toggle-container">
                            <label class="toggle-switch">
                                <input type="checkbox" id="intl-override">
                                <span class="toggle-slider" tabindex="0" role="switch" aria-checked="false" aria-labelledby="intl-override-label-text"></span>
                            </label>
                            <span class="toggle-label" id="intl-override-label">No</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="retirement-percentage">Retirement % (0-100) (optional)</label>
                        <input type="number" id="retirement-percentage" class="form-control" min="0" max="100" step="1" value="0">
                    </div>

                    <div class="form-group">
                        <label for="tax-rate">Tax Rate % (0-100) (optional)</label>
                        <input type="number" id="tax-rate" class="form-control" min="0" max="100" step="1" value="0">
                    </div>

                    <div class="btn-actions">
                        <button type="button" id="cancel-btn" class="btn btn-outline btn-block" aria-label="Cancel trip editing">Cancel</button>
                        <button type="submit" id="save-trip-btn" class="btn btn-primary btn-block" aria-label="Save trip">Save Trip</button>
                    </div>
                </form>
            </div>
        </div>

        <button class="btn-add-trip" id="add-trip-btn" aria-label="Add new trip" type="button">+</button>
        
        <!-- Ko-fi widget positioned in bottom-right corner -->
        <div class="kofi-widget-container">
            <div id="kofi-widget"></div>
            <script type='text/javascript' src='https://storage.ko-fi.com/cdn/widget/Widget_2.js'></script>
            <script type='text/javascript'>kofiwidget2.init('Help me build cool things! ✈️', '#d503ff', 'V7V61HOIHV', 'kofi-widget');kofiwidget2.draw();</script>
        </div>
        
        <div class="toast-container" id="toast-container"></div>
        
        <!-- Hidden templates for dynamic content -->
        <template id="trip-card-template">
            <div class="trip-card" data-id="">
                <div class="best-value-badge">Best Value</div>
                <div class="trip-card-header">
                    <div class="trip-title"></div>
                    <div class="trip-card-actions">
                        <button class="trip-card-action edit-trip" data-id="" aria-label="Edit trip">✏️</button>
                        <button class="trip-card-action delete-trip" data-id="" aria-label="Delete trip">🗑️</button>
                    </div>
                </div>
                <div class="trip-card-body">
                    <div class="trip-details">
                        <!-- Details will be populated dynamically -->
                    </div>
                    <div class="trip-summary">
                        <!-- Summary will be populated dynamically -->
                    </div>
                </div>
            </div>
        </template>
        
        <template id="trip-detail-template">
            <div class="trip-detail">
                <span class="trip-detail-label"></span>
                <span class="trip-detail-value"></span>
            </div>
        </template>
        
        <template id="trip-summary-template">
            <div class="trip-summary-item">
                <span class="trip-summary-label"></span>
                <span class="trip-summary-value"></span>
            </div>
        </template>
        
        <template id="toast-template">
            <div class="toast">
                <span class="toast-message"></span>
                <a href="#" class="toast-undo" style="display: none;">Undo</a>
            </div>
        </template>
    </div>
</body>
</html>
